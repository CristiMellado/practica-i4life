<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button autoHide="false"></ion-menu-button>
    </ion-buttons>

    <div class="toolbar-content">
    <ion-title class="tarea">Gestor de Tareas</ion-title>
    <div class="username-container">
      <ion-icon name="person"></ion-icon>
      <ion-text>
        Hola, {{ username }}
      </ion-text>
    </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!--
  <ion-item>
    <ion-input [(ngModel)]="newTaskTitle" placeholder="Nueva tarea"></ion-input>
    <ion-button (click)="addTask()" class="add-btn">Añadir</ion-button>
  </ion-item> -->
    
    <!-- Añadimos el ion-grid para organizar las tareas en una cuadrícula -->
    <div style="display: flex; justify-content: center;">
        <!-- Usamos ngFor para crear un ion-col para cada tarea, asegurando que haya 4 columnas por fila -->
         <div style="width: 40%;">
          <h2>Sin completar</h2>
           <div  *ngFor="let task of todoTasks">
             <ion-card
             [ngClass]="{
               'card-iot'       : task.department === 'Datos & IOT',
               'card-fullstack' : task.department === 'Desarrollo Fullstack',
               'card-marketing' : task.department === 'Marketing',
               'card-diseno-web': task.department === 'Diseño Web'
             }"
           >
               <ion-card-header>
                 <ion-card-title>{{ task.title }}</ion-card-title>
               </ion-card-header>
               <ion-card-content>
                 <p><strong>Responsable: </strong> {{ task.userId?.username }}</p>
                 <p><strong>Departamento: </strong>{{ task.department }}</p>
                 <p><strong>Creada el:</strong> {{ task.createdAt| date:'short' }}</p>
                 <p><strong>Última modificación:</strong> {{ task.updatedAt | date:'short' }}</p>
                 <p><strong>Estado: </strong>{{ task.status }}</p>
     
                 <ion-checkbox
                   slot="start"
                   [(ngModel)]="task.completed"
                   (ionChange)="onStatusChange(task, $event.detail.checked)"
                 >Completar</ion-checkbox>
     
                 <ion-button color="danger" fill="clear" (click)="deleteTask(task)">
                   <ion-icon name="trash"></ion-icon>
                 </ion-button>
               </ion-card-content>
             </ion-card>
           </div>
         </div>
         <div style="width: 40%;">
          <h2>Completadas</h2>
           <div *ngFor="let task of completedTasks">
             <ion-card
             [ngClass]="{
               'card-iot'       : task.department === 'Datos & IOT',
               'card-fullstack' : task.department === 'Desarrollo Fullstack',
               'card-marketing' : task.department === 'Marketing',
               'card-diseno-web': task.department === 'Diseño Web'
             }"
           >
               <ion-card-header>
                 <ion-card-title>{{ task.title }}</ion-card-title>
               </ion-card-header>
               <ion-card-content>
                 <p><strong>Responsable: </strong> {{ task.userId?.username }}</p>
                 <p><strong>Departamento: </strong>{{ task.department }}</p>
                 <p><strong>Creada el:</strong> {{ task.createdAt| date:'short' }}</p>
                 <p><strong>Última modificación:</strong> {{ task.updatedAt | date:'short' }}</p>
                 <p><strong>Estado: </strong>{{ task.status }}</p>
     
                 <ion-checkbox
                   slot="start"
                   [(ngModel)]="task.completed"
                   (ionChange)="onStatusChange(task, $event.detail.checked)"
                 >Completar</ion-checkbox>
     
                 <ion-button color="danger" fill="clear" (click)="deleteTask(task)">
                   <ion-icon name="trash"></ion-icon>
                 </ion-button>
               </ion-card-content>
             </ion-card>
           </div>
         </div>
    </div>
  </ion-content>
  
